# Structure #######################################################################################
# Color		0:black, 1:white
# Position	0:top, 1:bottom
# Board		[0 1 2 3 .... 7
# 			 8 9 ........ 15
# 			 .
# 			 .
# 			 56 ......... 63]


#REGION ZOBRIST_KEYS
zobrist_keys = [[3545427036573259792, 14043618946588395637, 12271019772800652279, 10443468656101679122, 10759242860630621877,
				 17573661893114468026, 3685353388122734662, 6874667097316369299, 10151850371020827229, 8603724703026807356,
				 18169656456392735327, 17359351222332957910, 11080556013328878346, 1233935955301864215, 7177481877746158356,
				 18158208851592881243, 8664500933737639483, 11811641701353247226, 1499754316210611502, 15487242474914101278,
				 6711500048140308568, 1283309853694542413, 7542578931362108356, 15939685260606886174, 17511688641065667162,
				 17198682062687042523, 14284301007479099999, 18101990868176319834, 18262837838450292714, 6947103761995218168,
				 4589306903430803151, 18378051648102374084, 9649522906602524892, 16581798734669370205, 2639356658317412298,
				 4573409579230983561, 17067877758688372845, 9912693094290407292, 2623292682651550514, 15796123209720685377,
				 16524419279240259531, 10598203483029868930, 16686423338769041839, 12990421656889361113, 10473058277152612491,
				 11730895029324949857, 4366377956702022144, 8942788956337818508, 3083528524043914847, 11449346456897233286,
				 14528841289461082585, 1745436972987490798, 5709110338467627736, 6398458952242701346, 17445749382690767942,
				 1241737770478186681, 5230826888741321107, 7010193830814625835, 1141198550735309673, 9671858901063437861,
				 15289622076882140777, 963689919498316265, 11567432039029445565, 17319752431752832702],
				 [17383911504510874436, 14051447848089226689, 1287729735070310057, 2232894803186650571, 14597853095979287383,
				 10366986639929254749, 8178672680150407863, 17249393254820404956, 13168754550182049123, 6049141305059741568,
				 10570340287810605935, 14976174837949244085, 6913068442395097205, 18351670269805318484, 17580428880030266721,
				 4653998777886832789, 13883204171315243736, 16551825491094616946, 7897123617728603404, 7283055142659730711,
				 4928519821616012402, 87801387644090282, 4322068979796638076, 8745654909781221391, 11658802562875161299,
				 11632097722810815570, 610126755797970725, 7416938990874884325, 13589466174861931706, 13514515694976852843,
				 15847724986262933725, 17508353549181939110, 15656726461750714570, 6115379962283173696, 4036881751678862233,
				 11508844667925089513, 12732853992199530322, 12138039595845599324, 6103450687805354368, 4331107368252286213,
				 16935403201606060748, 18125049314963435099, 14179364379416254172, 6608584373942059178, 5193217200247835328,
				 16780918899415103643, 13698608459056518419, 15420464340196644226, 5064042723992146073, 1044507401241873434,
				 13114994238104856761, 1365385575003341721, 12170728943502919151, 16403374790723764297, 7448631329842228928,
				 13879760876605862790, 13199164534646753699, 2290371985717855028, 7468137021205950920, 1437385030304706338,
				 16205644137309101688, 11375866535983081827, 9598610994719157339, 438754739543088463],
				 [2372232138993512396, 11732845756158879891, 10960423932478200463, 12379944558636965522, 5891453273532295108,
				 2106280429187722929, 8890997736513724069, 14551898810707426191, 13083291816081402456, 11484076684183551452,
				 11637182786001517807, 5019460124707201053, 1985936616429232207, 4956468321809840241, 18075911543670970400,
				 10390399840753255167, 15828338878661881548, 12048539445474379176, 4823780291108742259, 13555032536302984727,
				 16697363467573075465, 11189812847885431442, 11245243331090743622, 14916977379056118909, 14332176586866699376,
				 2881581248018114112, 17698700010092037127, 17360710783915207703, 5758839616605476726, 10746283106529902980,
				 6790136883182486965, 8572537770451973694, 1911444468356607230, 301356264441816964, 7225331028312216885,
				 12763168312676008497, 17019987438311640880, 12344200100819083897, 11777727421498678753, 10532372822019311237,
				 12740870474602861951, 12552341523301083364, 8600141891313753422, 7051962137424662935, 16223079918510388175,
				 2267299503944498673, 46558150272283627, 4439883046053489551, 8682538571786773233, 4458094286747495699,
				 2646613345095383902, 11960204853082578628, 15406528090740113260, 1036266747868048873, 480503785783270665,
				 9897673419679433442, 12381382037360954719, 4073453821681693265, 13180002042334875541, 17007341883818605860,
				 2399302566620955289, 12381788716870988163, 17418557035596536230, 16825547416888773238],
				 [12148223515915381193, 10326871344857256809, 9420141742361603204, 15428834234959486540, 715443414497227671,
				 4107705591930648362, 14065693353981018843, 17165396626197190947, 15827793576848166632, 12381224263358232808,
				 7701510985825917401, 9060557967986292151, 8944479856941539755, 12146848638463996407, 13401176915901992448,
				 8365167508080871801, 6309081744979229212, 15799352784096576525, 10500232171936751450, 11718713786176438385,
				 13377530242249609815, 10062188630769413505, 4913085973065406672, 5416637887082074491, 14411020622166508599,
				 15478820010890224530, 7090457646017393480, 6158374411179987008, 16408055474712422848, 393286756851555578,
				 2122752515785642871, 628555410876665764, 15870967825573704982, 6822602403830933182, 8816980209180712265,
				 4756967216698517643, 3504236749072774690, 6531673586683621554, 153250672676204265, 17507528910971740043,
				 13164985742465037214, 10843682508596267463, 2460110908625475184, 17405867682404496945, 5339846236581406460,
				 7617123401138133794, 3548052472000192081, 17287464935647536722, 4659259651127896996, 13432118781304830854,
				 11367282598723988168, 13846021100558977017, 9732460348670492642, 2894254763672048828, 15171729257593031367,
				 16195508633207972662, 10746276894030488991, 12126446276495865223, 10063234533786263051, 233299611785413755,
				 3033314279712897369, 3615325632902242199, 9577231775818577895, 13561533635171622810],
				 [2037376954720644058, 4676574670591402158, 3591679351667314157, 7121305827354218076, 10631272838910335238,
				 9856013188035821640, 12625968717772220972, 177992637087163438, 13444002882156342130, 2215507057073938305,
				 3062914501610152968, 10187299019221770776, 10271894997432385427, 2518360685177071082, 5059414911773750038,
				 16536316861138681695, 2935742314388953065, 16492725943167874860, 8202229331707629935, 4083169975331724925,
				 13049812185292405011, 12340582353824557687, 11456140594192921886, 12441839528758126399, 2135025702245654789,
				 11449477887737353543, 3634765253755975513, 5187298260297653290, 6470120395222400369, 4335055133975221606,
				 742519505508009857, 10705749222781162543,4502220106171488572, 3683180176641046780, 8288044961717935351,
				 14570106653524559338, 16237797435987098776, 15153083883440540106, 6320796368713645471, 5494033660943499446,
				 14417703183710933237, 6187107325014962415, 6506199281159327687, 5813041095898893888, 11168705080385380569,
				 3361150937628944665, 5728310097721498821, 431831503725643096, 3515587542202742207, 12033539713479259926,
				 3093206913339145458, 13095031055203779188, 1900328726248428607, 17625818764345165368, 16601903449194677847,
				 16824347676796157472, 6823245473084876186, 5863450025162420693, 594526081675357333, 5598792824422956526,
				 9482510143681226398, 8865630696327820919, 8675302570756205810, 18145378815185264719],
				 [8366479845638128608, 4935479245422063340, 3033484641686091116, 17495776500929417966, 1294013065227101490,
				 313658594544473926, 2064074298501060098, 8374885671835609019, 6418584987125624536, 15659522624158798912,
				 15847919586653770910, 840127418781964648, 1540869955209457575, 11365762982823595492, 7231903611760998238,
				 2817900183159072126, 12622548472389024539, 5925503386344365320, 18413150983756808606, 11771923494953897328,
				 8998945097681735908, 2005158497599563496, 16426663019169314615, 2290871344081466592, 13035548444840135628,
				 7724498324808954495, 16801997559757610553, 107361701231240552, 1772444966576185613, 4949385977932165678,
				 7537959852436692731, 2083923264450882957, 4989594086264197945, 2803097185838131798, 7335769344221444482,
				 5734261290351791683, 7745929131196359246, 6791227474365049626, 7239142109165544423, 14927402768645922658,
				 17966642504502417008, 11499819112352409221, 13097378947682049314, 2102678307274833307, 18292124833139859464,
				 5751269838849386477, 4701039673108865919, 3268451723944293752, 2473504538510909545, 5862399557643398720,
				 4019460291994006988, 3384289376784021302, 12487881168001191827, 1674753773977668917, 7299447721923442699,
				 11878434201944534444, 15291646571778112301, 2162322290675170961, 13750399529316459662, 3469361556915728407,
				 17486510564473306354, 10625489041873896647, 13386289909433560019, 18057227325972096235],
				 [9702780117039710581, 11445685329739880472, 12140769500834070049, 6177746718889745911, 7990840186039380962,
				 16614456236205332445, 9019386475055767957, 14486309564999456661, 3152707712941194027, 5186119421612173031,
				 10634751444393345669, 17795219137287952920, 10049248688327619889, 5290809601669736936, 5392610535224762991,
				 10902860351722679486, 5149041054913392369, 17571960566727553359, 14751319818799043691, 18322690695406753396,
				 3579514685504491189, 17730053339396759898, 9492380915003452673, 14485086392522915344, 8802119444952668107,
				 4350101162563107183, 6831613275858324295, 17803572963302924049, 10527854624126489712, 9927766043501901111,
				 16735290191876593679, 10260117306811396429, 13854000955754874972, 5011758718455422449, 13154018884926021181,
				 5058697189529381470, 12778521063140055388, 3828552918534501255, 6253526940563569911, 14922830602052205462,
				 16230526040804510876, 4562943251762013669, 10274259688432375239, 6203238107121053204, 17172677653056338052,
				 12691249539191058876, 15891781776194470323, 1548670499898636037, 3532845138686672213, 2507907037162677849,
				 17803730341974739130, 11758455399890381954, 8067294643791645778, 3271119058179400652, 5134772214736405416,
				 14580175047582638038, 13834983654379865760, 4724077660541542553, 8246475618160234479, 2823397990293944787,
				 732781129626471913, 609910927003611647, 37139625011992374, 16835389656934365436],
				 [13784019143185409690, 2983478122699318900, 10871834935423164448, 13413049236468817825, 8213753846029033865,
				 15427234406358701368, 4699727885012481638, 6767709998438504439, 12560961735552021901, 4215085974074683836,
				 683599095645768606, 12411234320573338028, 16348130454907895150, 2838929281206875819, 1875957023442993306, 
				5133114072863767612, 149445176198293442, 17101692600576506139, 11660882456238524231, 18393670489042934754,
				 14161918966311909142, 7196413568788656953, 14316266280359372273, 13428711282380455504, 2098118528164463723,
				 6082870066780753149, 5409677072487668415, 1395299325344993079, 5097280440706934342, 13281287550655908093,
				 3446557842949306073, 7427550034883932305, 7407032829277975265,14962076856924483471, 9748087263165147369,
				 6744378930645238481, 3404416432232806233, 6220575042734382776, 13944721163616430704, 8869949797946409076,
				 11850558921690662373, 7014248749060638552, 6177098460244749550, 16789266601983710832, 15856477069947479332,
				 5900663457176561595, 16102086885746096789, 4075667888578169848, 3661038278572379955, 15289529775565013542,
				 2572864926089187422, 12700270494922911812, 6411474552752407482, 11714323016392305823, 4660355617855006613,
				 8859141384485782314, 2712964823609905876, 2869246992959719607, 5262334054816877646, 15580067372249357477,
				 13947707374241058698, 9536844216139946698, 848119095131121047, 1964548908678459292],
				 [8127499326100278036, 13150864875029882483, 9887836136624200132, 14837434433042634437, 10288248099101773340,
				 5472101104507907665, 8137323126608815184, 2668545163021764188, 1909083535538725338, 13312558073705980394,
				18094412699071848823, 17787723231114143990, 4270595787319390167, 4284552314297021873, 14286311836346400153,
				 14095731160125599947, 9816601404700172445, 10818232179329930466, 8115017871149073025, 9451099696810998756,
				 10817657966373232870, 15853388923268129751, 7553539054314536476, 13076984138952423577, 995247851336568089,
				 17017855915294099236, 17132565485615799200, 11973539831364226056, 4279424165443677677, 16906705874815460676,
				 12468472816672177963, 10630464916590516518, 14687006934588842112, 17416361370056979457, 15381261508022826975,
				 4733713303579466853, 7566440574433140719, 17541510026803658590, 13280920446022449347, 17272521059959766930,
				 17092473056676492282,10070083877011570224, 4163760929304568735, 2601305973383005424, 12214100813165863416,
				 1119016158048714927, 16427859322018801185, 5353936639211757969, 3356758621475529791, 14629752436847140847,
				 16855194456090483050, 9173543010100702312, 12213574364609174093, 10489273495023203710, 15158301907234076795,
				 4637180823470526340, 4874581938539687501,12216870108605063499, 3071798158598483863, 13727685990882045395,
				 13385516316309593410, 8102299722170514567, 15824565643430448913, 16729051139418220906],
				 [11446491424527188971, 7756399268817885325, 14718286924035640734, 18292780947745043155, 5426684667807259911,
				 2566706998785228990, 3399906886510554296, 17139167419927763860, 17357302956257315314, 5037976672772476618,
				 15683183568355204309, 3554690936632870457, 17414777955857052844, 7487472813467900021, 6228968235773243979,
				 11119629682563306215, 8222086443312647560, 7689314456594251407, 10910833409242638951, 4610801562797182326,
				 11394782590965921205, 13068893546674964966, 5137311859958677355, 10637937434759001133, 15049232316065027705,
				 15936050009660924424, 23631366201087009, 12648921064519083880, 9319179454789201868, 16692575367427097770,
				 14086364543859443187, 11999292573420761922, 6407717041786577171, 2636056440337388279, 4532601818807286660,
				 15312925424778877672, 16301036273397252170, 7171549438958136478, 2473447796392820816, 9907895983818552149,
				 12287086273872237781, 3392609653012677863, 2208607089317605303, 15738314794208595055, 14978858681116279420,
				 11450969067641759059, 3144455075074476956, 4705585288784660849, 6180853178939208490, 4526428688111230859,
				 7186807893268911912, 13190975405241968227, 2000882032134473458, 1869260118450135471, 8162271761728915006,
				 13791064713286196205, 6156844795924619680, 10641022650176690838, 15181701511474007411, 9248575831688067698,
				 6408447987736081058, 9172545730993704723, 5122254899747796481, 701553177841173731],
				 [14566315243907431346, 7838718117710064856, 5974854501529480369, 3833465166351720173, 10279341133634287186,
				 15273397954720993431, 12177119150730690486, 11121130100375833076, 7327170610574735632, 13513293290075607005,
				 10276500557296248606, 2459174993206964617, 13444657540328699258, 12300795880233237062, 17424199016350542883,
				 13880244356540217559, 8997786163427457058, 12628532665627514832, 9823135594495077068, 11022439937181139298,
				 9005082775369334750, 18215857584579861000, 1305725302158587980, 6637148729704873612, 12954774406623585506,
				 124669103245821180, 134179512961521581, 14130944440355607697, 6926422014909283124, 14021389150089527258,
				 2406780122911282055, 10322104811681056864, 13731492088094752168, 11519256738492170405, 14157565433788158925,
				 18201610924644347306, 11986713170643634391, 6571285265449204312, 2807891347094244311, 6764652707146674720,
				 7815642151057143892, 12425342226337954345, 13439231537150492062, 62285058171727510, 2486265391057925246,
				 15836885194490920810, 14199807026095510247, 3346891412216394946, 13760588017745909256, 4472641298513705507,
				 2759452471680967431, 6213189651463955764, 11614126572341029531, 3305244613109115311, 7616701639687331435,
				 5904854800788516657, 8570026508112714160, 5797951421414096630, 7851856556447436289, 16893927493715246975,
				 11457982434725266247, 2237221464495405576, 15385539758151077697, 12965554967514804384],
				 [15077065537300464704, 15150446667994664742, 14515061964425908955, 2506396599924572574, 16020933293910627541,
				 8982477996461804995, 3860671075024109519, 9745977241938542140, 12213435139940357065, 3891362471407402131,
				 15751230432857864796, 2891676685036183218, 6775171244459776485, 6461171558925336521, 2184350669189132090,
				 5385497652892687257, 10789561056672620593, 641742634749462950, 86841099276822832, 12226062989849036309,
				 15754267410597825503, 18369813531777274732, 3399588193703801068, 12236112661278884749, 16489887153563111536,
				 2087892585909932054, 8086161209734643541, 16478993740407235094, 8929515866644427622, 9445353632303705066,
				 4849844913070699978, 14759258757732369218, 8993056114673237752, 12962007447271270188, 4933815365569961768,
				 8630003296315444492, 18175313038217150830, 6172617984768361961, 8963986465325726300, 7961874084321347461,
				 10228424360384659603, 2221817860796949886, 6725768157684740286, 2456515443613111872, 3028142744779634797,
				 12255367107342993155, 14604326672409261977, 69520299622124105, 15421780155857000448, 4681454060395354045,
				 15203159773567142654, 14473667450065626932, 8421753016657984214, 250768999503646177, 1698240059022379053,
				 11863553860275473011, 17401165356028421522, 16247867835492844065, 6620125820825145601, 12705898805285380838,
				 343180692126300054, 657475371964019268, 11248388393864804187, 13891498615175569108]]
	 
zobrist_turn = 7126306718518563400

zobrist_top_short_castled			= 2894792649095876214
zobrist_top_long_castled			= 2378204058020119928
zobrist_top_king_moved				= 6486268495837289463
zobrist_top_short_castling_off		= 8749567294662590109
zobrist_top_long_castling_off		= 2374829834772315263
zobrist_top_en_passant				= 7738291073050938201

zobrist_bottom_short_castled		= 3892018726394058372
zobrist_bottom_long_castled			= 7362936494098772219
zobrist_bottom_king_moved			= 2763840271094659365
zobrist_bottom_short_castling_off	= 7390298173950372290
zobrist_bottom_long_castling_off	= 3820101837485030217
zobrist_bottom_en_passant			= 9874930281717283374
#ENDREGION

class Board:

	def __init__(self, replica = False, bottom_color = 1):
		self.arr = [0]*64
		
		self.sides = [[	not bottom_color,		#0: top_color
						0,						#1: top_castled
						0,						#2: top_king_moved
						0,						#3: top_short_castling_off
						0,						#4: top_long_castling_off
						-1,						#5: top_en_passant (top player can be attacked by en-passant on the file indicated here)
						[0]*16,					#6: top_positions_with_pieces
						0]						#7: top_king_pos
						
					,[	bottom_color,			#0: bottom_color
						0,						#1: bottom_castled
						0,						#2: bottom_king_moved
						0,						#3: bottom_short_castling_off
						0,						#4: bottom_long_castling_off
						-1,						#5: bottom_en_passant (bottom player can be attacked by en-passant on the file indicated here)
						[0]*16,					#6: bottom_positions_with_pieces
						0]]						#7: bottom_king_pos
		
		if replica:
			return

		self.zobrist = 0
		
		self.turn = 1
		self.game_phase = 0
		
		self.load_default_pieces()
		
	def replicate(self, board):
		self.arr[:] = board.arr[:]
		self.zobrist = board.zobrist
		
		self.turn = board.turn
		self.game_phase = board.game_phase
		
		self.sides[0][0] = board.sides[0][0]
		self.sides[0][1] = board.sides[0][1]
		self.sides[0][2] = board.sides[0][2]
		self.sides[0][3] = board.sides[0][3]
		self.sides[0][4] = board.sides[0][4]
		self.sides[0][5] = board.sides[0][5]
		self.sides[0][6][:] = board.sides[0][6][:]
		self.sides[0][7] = board.sides[0][7]
		
		self.sides[1][0] = board.sides[1][0]
		self.sides[1][1] = board.sides[1][1]
		self.sides[1][2] = board.sides[1][2]
		self.sides[1][3] = board.sides[1][3]
		self.sides[1][4] = board.sides[1][4]
		self.sides[1][5] = board.sides[1][5]
		self.sides[1][6][:] = board.sides[1][6][:]
		self.sides[1][7] = board.sides[1][7]

	def load_default_pieces(self):
		#top player
		self.arr[0] = 2
		self.arr[1] = 3
		self.arr[2] = 4
		self.arr[5] = 4
		self.arr[6] = 3
		self.arr[7] = 2
		for i in range(8, 16):
			self.arr[i] = 1
		
		if self.sides[0][0] == 0:
			self.arr[3] = 5
			self.arr[4] = 6
			
			self.sides[0][7] = 4
		else:
			self.arr[3] = 6
			self.arr[4] = 5
				
			self.sides[0][7] = 3
				
		self.sides[0][6][:] = range(16)
		
		#bottom player
		self.arr[56] = 8
		self.arr[57] = 9
		self.arr[58] = 10
		self.arr[61] = 10
		self.arr[62] = 9
		self.arr[63] = 8
		for i in range(48, 56):
			self.arr[i] = 7
				
		self.sides[1][6][:] = range(48, 64) 
		
		if self.sides[1][0] == 0:
			self.arr[59] = 12
			self.arr[60] = 11

			self.sides[1][7] = 59
		else:
			self.arr[59] = 11
			self.arr[60] = 12

			self.sides[1][7] = 60

		#update board zobrist
		for i in range(16):
			self.update_zobrist(self.arr[i], i)
			
		for i in range(48, 64):
			self.update_zobrist(self.arr[i], i)

	def same_params(self, board):
		return (board.zobrist == self.zobrist
		and board.game_phase == self.game_phase)
	
	def remove_piece(self, p):
		if self.arr[p] != 0:
			if self.arr[p] < 7:
				self.sides[0][6].remove(p)
				
				#if rook moved or captured, disable castling
				if p == 7:
					if self.sides[0][0] == 0:
						self.set_top_short_castling_off()
					else:
						self.set_top_long_castling_off()
				elif p == 0:
					if self.sides[0][0] == 0:
						self.set_top_long_castling_off()
					else:
						self.set_top_short_castling_off()
			else:
				self.sides[1][6].remove(p)
				
				if p == 56:
					if self.sides[1][0] == 0:
						self.set_bottom_short_castling_off()
					else:
						self.set_bottom_long_castling_off()
				elif p == 63:
					if self.sides[1][0] == 0:
						self.set_bottom_long_castling_off()
					else:
						self.set_bottom_short_castling_off()
					
			self.update_zobrist(self.arr[p], p)
			self.arr[p] = 0
	
	def set_piece(self, piece, p):
		if self.arr[p] == 0:
			self.update_zobrist(piece, p)
			self.arr[p] = piece
			
			if piece < 7:
				if p not in self.sides[0][6]: self.sides[0][6].append(p)
			else:
				if p not in self.sides[1][6]: self.sides[1][6].append(p)
	
	def move_piece(self, f, t):
		self.remove_piece(t)
		self.set_piece(self.arr[f], t)
		self.remove_piece(f)
		
		#update king position
		if self.arr[t] == 6:
			self.sides[0][7] = t
			self.set_top_king_moved()
		elif self.arr[t] == 12:
			self.sides[1][7] = t
			self.set_bottom_king_moved()
			
		#set en_passant
		self.reset_top_en_passant()
		self.reset_bottom_en_passant()
			
		if self.arr[t] == 1 and t == f+16:
			self.set_top_en_passant(t%8)
		elif self.arr[t] == 7 and t == f-16:
			self.set_bottom_en_passant(t%8)

	def set_turn(self, turn):
		if turn == self.turn:
			return
			
		self.turn = turn
		self.zobrist ^= zobrist_turn

	
	def set_top_short_castled(self):
		self.sides[0][1] = 1
		self.zobrist ^= zobrist_top_short_castled

	def set_top_long_castled(self):
		self.sides[0][1] = 2
		self.zobrist ^= zobrist_top_long_castled

	def set_top_king_moved(self):
		self.sides[0][2] = 1
		self.zobrist ^= zobrist_top_king_moved

	def set_top_short_castling_off(self):
		self.sides[0][3] = 1
		self.zobrist ^= zobrist_top_short_castling_off

	def set_top_long_castling_off(self):
		self.sides[0][4] = 1
		self.zobrist ^= zobrist_top_long_castling_off

	def set_top_en_passant(self, f):
		self.sides[0][5] = f
		self.zobrist ^= zobrist_top_en_passant

	def reset_top_en_passant(self):
		self.sides[0][5] = -1
		self.zobrist ^= zobrist_top_en_passant


	def set_bottom_short_castled(self):
		self.sides[1][1] = 1
		self.zobrist ^= zobrist_bottom_short_castled

	def set_bottom_long_castled(self):
		self.sides[1][1] = 2
		self.zobrist ^= zobrist_bottom_long_castled

	def set_bottom_king_moved(self):
		self.sides[1][2] = 1
		self.zobrist ^= zobrist_bottom_king_moved

	def set_bottom_short_castling_off(self):
		self.sides[1][3] = 1
		self.zobrist ^= zobrist_bottom_short_castling_off

	def set_bottom_long_castling_off(self):
		self.sides[1][4] = 1
		self.zobrist ^= zobrist_bottom_long_castling_off

	def set_bottom_en_passant(self, f):
		self.sides[1][5] = f
		self.zobrist ^= zobrist_bottom_en_passant

	def reset_bottom_en_passant(self):
		self.sides[1][5] = -1
		self.zobrist ^= zobrist_bottom_en_passant


	def update_zobrist(self, piece, p):
		self.zobrist ^= zobrist_keys[piece - 1][p] #(piece - 1) because pieces are number from 1 to 12 so index is from 0 to 11
		